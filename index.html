<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tamil Nadu Nattu Sakkarai Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Tamil:wght@400;700&display=swap" rel="stylesheet">
    <style>
        .payment-section {
            display: none;
        }
        .qr-code-container {
            text-align: center;
            margin: 20px 0;
        }
        .qr-code {
            max-width: 200px;
            margin: 0 auto;
        }
        .upload-section {
            margin-top: 20px;
        }
        .preview-image {
            max-width: 100%;
            margin-top: 10px;
            display: none;
        }
    </style>
</head>
<body>
    <!-- Government Header -->
    <header class="govt-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-2">
                    <img src="logo.jpeg" 
                         alt="Tamil Nadu Government Logo" class="govt-logo">
                </div>
                <div class="col-md-8 text-center">
                    <h1 class="govt-title">தமிழ்நாடு அரசு</h1>
                    <h2 class="govt-subtitle">Tamil Nadu Government</h2>
                    <h3 class="dept-title">நாட்டு சர்க்கரை விற்பனை மையம்<br>Nattu Sakkarai Sales Portal</h3>
                </div>
                <div class="col-md-2 text-end">
                    <img src="niral.png" 
                         alt="TN Portal Logo" class="portal-logo">
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark govt-nav">
        <div class="container">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link active" href="#">முகப்பு</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">விவரங்கள்</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">விதிமுறைகள்</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">தொடர்புக்கு</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">உதவி</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container my-4">
        <div class="row">
            <!-- Farmer Registration Form -->
            <div class="col-lg-6">
                <div class="card govt-card">
                    <div class="card-header govt-card-header">
                        <h4>நாட்டு சர்க்கரை  பதிவு படிவம்<br>Nattu Sakkarai Registration Form</h4>
                    </div>
                    <div class="card-body">
                        <form id="farmerForm">
                            <div class="mb-3">
                                <label for="farmerName" class="form-label">விவசாயியின் பெயர் / Farmer Name</label>
                                <input type="text" class="form-control" id="farmerName" required>
                            </div>
                            <div class="mb-3">
                                <label for="govtId" class="form-label">அரசு அடையாள எண் / Govt ID Number</label>
                                <input type="text" class="form-control" id="govtId" required>
                            </div>
                            <div class="mb-3">
                                <label for="phone" class="form-label">தொலைபேசி எண் / Phone Number</label>
                                <input type="tel" class="form-control" id="phone" required>
                            </div>
                            <div class="mb-3">
                                <label for="district" class="form-label">மாவட்டம் / District</label>
                                <select class="form-select" id="district" required>
                                    <option value="">தேர்ந்தெடுக்கவும் / Select</option>
                                    <option value="Ariyalur">Ariyalur</option>
                                    <option value="Chennai">Chennai</option>
                                    <option value="Coimbatore">Coimbatore</option>
                                    <option value="Cuddalore">Cuddalore</option>
                                    <option value="Dharmapuri">Dharmapuri</option>
                                    <option value="Dindigul">Dindigul</option>
                                    <option value="Erode">Erode</option>
                                    <option value="Kallakurichi">Kallakurichi</option>
                                    <option value="Kancheepuram">Kancheepuram</option>
                                    <option value="Karur">Karur</option>
                                    <option value="Krishnagiri">Krishnagiri</option>
                                    <option value="Madurai">Madurai</option>
                                    <option value="Nagapattinam">Nagapattinam</option>
                                    <option value="Namakkal">Namakkal</option>
                                    <option value="Nilgiris">Nilgiris</option>
                                    <option value="Perambalur">Perambalur</option>
                                    <option value="Pudukottai">Pudukottai</option>
                                    <option value="Ramanathapuram">Ramanathapuram</option>
                                    <option value="Salem">Salem</option>
                                    <option value="Sivagangai">Sivagangai</option>
                                    <option value="Thanjavur">Thanjavur</option>
                                    <option value="Theni">Theni</option>
                                    <option value="Thiruvallur">Thiruvallur</option>
                                    <option value="Thiruvarur">Thiruvarur</option>
                                    <option value="Thoothukudi">Thoothukudi</option>
                                    <option value="Tiruchirappalli">Tiruchirappalli</option>
                                    <option value="Tirunelveli">Tirunelveli</option>
                                    <option value="Tirupathur">Tirupathur</option>
                                    <option value="Tiruppur">Tiruppur</option>
                                    <option value="Tiruvannamalai">Tiruvannamalai</option>
                                    <option value="Vellore">Vellore</option>
                                    <option value="Viluppuram">Viluppuram</option>
                                    <option value="Virudhunagar">Virudhunagar</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="sakkaraiKg" class="form-label">நாட்டு சர்க்கரை அளவு (கிலோ) / Nattu Sakkarai Quantity (kg)</label>
                                <input type="number" class="form-control" id="sakkaraiKg" required>
                            </div>
                            <div class="mb-3">
                                <label for="price" class="form-label">விலை (கிலோவுக்கு) / Price (per kg)</label>
                                <input type="number" class="form-control" id="price" required>
                            </div>
                            <button type="submit" class="btn govt-btn">பதிவு செய்க / Register</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Farmer Listings -->
            <div class="col-lg-6">
                <div class="card govt-card">
                    <div class="card-header govt-card-header">
                        <h4>நாட்டு சர்க்கரை விவசாயிகள் பட்டியல்<br>Nattu Sakkarai Farmers List</h4>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table govt-table" id="farmersTable">
                                <thead>
                                    <tr>
                                        <th>பெயர் / Name</th>
                                        <th>மாவட்டம் / District</th>
                                        <th>அளவு (கிலோ) / Qty (kg)</th>
                                        <th>விலை / Price</th>
                                        <th>செயல் / Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Farmer data will be inserted here by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="govt-footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>தொடர்புக்கு / Contact Us</h5>
                    <p>நாட்டு சர்க்கரை விற்பனை மையம்<br>
                    Nattu Sakkarai Sales Center<br>
                    தமிழ்நாடு அரசு<br>
                    Tamil Nadu Government<br>
                    தொலைபேசி: 044-12345678</p>
                </div>
                <div class="col-md-6 text-end">
                    <img src="OIP.jpeg" alt="TN Footer Logo" class="footer-logo">
                    <p class="copyright">© 2023 Tamil Nadu Government. All Rights Reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Purchase Modal -->
    <div class="modal fade" id="purchaseModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header govt-card-header">
                    <h5 class="modal-title">நாட்டு சர்க்கரை வாங்குதல்<br>Purchase Nattu Sakkarai</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="purchaseForm">
                        <input type="hidden" id="purchaseFarmerId">
                        <div class="mb-3">
                            <label for="buyerName" class="form-label">வாங்குபவர் பெயர் / Buyer Name</label>
                            <input type="text" class="form-control" id="buyerName" required>
                        </div>
                        <div class="mb-3">
                            <label for="buyerDept" class="form-label">துறை / Department</label>
                            <input type="text" class="form-control" id="buyerDept" required>
                        </div>
                        <div class="mb-3">
                            <label for="buyerId" class="form-label">அரசு அடையாள எண் / Govt ID</label>
                            <input type="text" class="form-control" id="buyerId" required>
                        </div>
                        <div class="mb-3">
                            <label for="purchaseQty" class="form-label">அளவு (கிலோ) / Quantity (kg)</label>
                            <input type="number" class="form-control" id="purchaseQty" required>
                        </div>
                        
                        <!-- Payment Section (initially hidden) -->
                        <div id="paymentSection" class="payment-section">
                            <hr>
                            <h5 class="text-center">கூகுள் பே கட்டணம்<br>Google Pay Payment</h5>
                            <div class="qr-code-container">
                                <img src="qr.jpg" alt="GPay QR Code" class="qr-code">
                                <p>மேலே உள்ள QR குறியீட்டை ஸ்கேன் செய்து கட்டணம் செய்யவும்<br>Scan the above QR code to make payment</p>
                            </div>
                            
                            <div class="upload-section">
                                <label for="paymentProof" class="form-label">கட்டண சான்று பதிவேற்றம் / Payment Proof Upload</label>
                                <input type="file" class="form-control" id="paymentProof" accept="image/*" required>
                                <img id="proofPreview" class="preview-image" alt="Payment Proof Preview">
                            </div>
                        </div>
                        
                        <div class="d-flex justify-content-between mt-3">
                            <button type="button" id="proceedToPayBtn" class="btn govt-btn">கட்டணத்திற்கு தொடரவும் / Proceed to Payment</button>
                            <button type="submit" id="completePurchaseBtn" class="btn govt-btn" style="display:none;">வாங்குக / Purchase</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sample data for demonstration
        let farmers = [
            { id: 1, name: "ராமன்", district: "Chennai", quantity: 50, price: 40 },
            { id: 2, name: "முருகன்", district: "Coimbatore", quantity: 30, price: 45 },
            { id: 3, name: "குமார்", district: "Madurai", quantity: 40, price: 42 }
        ];

        // Display farmers in the table
        function displayFarmers() {
            const tableBody = document.querySelector('#farmersTable tbody');
            tableBody.innerHTML = '';
            
            farmers.forEach(farmer => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${farmer.name}</td>
                    <td>${farmer.district}</td>
                    <td>${farmer.quantity}</td>
                    <td>₹${farmer.price}/kg</td>
                    <td><button class="btn btn-sm govt-btn purchase-btn" data-id="${farmer.id}">வாங்குக / Purchase</button></td>
                `;
                tableBody.appendChild(row);
            });
            
            // Add event listeners to purchase buttons
            document.querySelectorAll('.purchase-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const farmerId = parseInt(this.getAttribute('data-id'));
                    openPurchaseModal(farmerId);
                });
            });
        }

        // Open purchase modal with farmer details
        function openPurchaseModal(farmerId) {
            const farmer = farmers.find(f => f.id === farmerId);
            if (!farmer) return;
            
            document.getElementById('purchaseFarmerId').value = farmerId;
            document.getElementById('purchaseQty').max = farmer.quantity;
            
            const modal = new bootstrap.Modal(document.getElementById('purchaseModal'));
            modal.show();
        }

        // Handle form submissions
        document.getElementById('farmerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Farmer registration submitted!');
            this.reset();
        });

        // Handle purchase form
        document.getElementById('purchaseForm').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Purchase completed successfully!');
            const modal = bootstrap.Modal.getInstance(document.getElementById('purchaseModal'));
            modal.hide();
            this.reset();
            // Reset payment section
            document.getElementById('paymentSection').style.display = 'none';
            document.getElementById('proceedToPayBtn').style.display = 'block';
            document.getElementById('completePurchaseBtn').style.display = 'none';
        });

        // Proceed to payment button
        document.getElementById('proceedToPayBtn').addEventListener('click', function() {
            // Validate form first
            const form = document.getElementById('purchaseForm');
            const buyerName = document.getElementById('buyerName').value;
            const buyerDept = document.getElementById('buyerDept').value;
            const buyerId = document.getElementById('buyerId').value;
            const purchaseQty = document.getElementById('purchaseQty').value;
            
            if (!buyerName || !buyerDept || !buyerId || !purchaseQty) {
                alert('Please fill all the details before proceeding to payment');
                return;
            }
            
            // Show payment section
            document.getElementById('paymentSection').style.display = 'block';
            this.style.display = 'none';
            document.getElementById('completePurchaseBtn').style.display = 'block';
        });

        // Preview payment proof image
        document.getElementById('paymentProof').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const preview = document.getElementById('proofPreview');
                    preview.src = event.target.result;
                    preview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        });

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            displayFarmers();
        });
    </script>
</body>
</html>
